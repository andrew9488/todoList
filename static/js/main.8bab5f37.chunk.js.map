{"version":3,"sources":["serviceWorker.ts","api/todolist-api.ts","features/Application/selectors.ts","features/Actions/App.ts","utils/utils-error.ts","features/Application/application-reducer.ts","features/Application/index.tsx","features/Task/selectors.ts","features/Todolists/selectors.ts","features/Todolists/todolists-reducer.ts","components/AddItemForm/AddItemForm.tsx","features/Login/selectors.ts","features/Login/auth-reducer.ts","utils/utils-redux.ts","features/Login/Login.tsx","features/Login/index.tsx","features/Todolists/TodoLists.tsx","components/EditableSpan/EditableSpan.tsx","features/Todolists/Todolist/TodoList.tsx","features/Todolists/index.tsx","features/Task/tasks-reducer.ts","features/Task/Task.tsx","features/Task/index.tsx","bll/rootReducer.ts","bll/store.ts","components/ErrorSnackbar/ErrorSnackbar.tsx","components/ErrorPage/ErrorPage.tsx","app/App.tsx","index.tsx","components/ErrorPage/ErrorPage.module.css"],"names":["Boolean","window","location","hostname","match","ResultStatusCode","TaskStatuses","TaskPriorities","appStatusSelector","state","app","status","isInitializedSelector","isInitialized","instance","axios","create","withCredentials","baseURL","headers","todoListsApi","get","title","post","todoListId","delete","put","taskId","model","authAPI","data","appActions","setAppStatus","createAction","setAppError","setIsLoggedIn","changeTasksEntityStatus","changeFilterTodoList","changeTodoListEntityStatus","handleAsyncServerAppError","thunkAPI","showError","dispatch","error","messages","length","initializedApp","initializeApp","fulfilled","rejectWithValue","errors","fieldsErrors","handleAsyncServerNetworkError","message","undefined","createAsyncThunk","payload","a","response","resultCode","success","isLoggedIn","slice","createSlice","name","initialState","reducers","extraReducers","builder","addCase","action","asyncActions","appAsyncActions","appReducer","reducer","tasksSelector","tasks","todoListsSelector","todoLists","fetchTodoLists","removeTodoList","entityStatus","id","addTodoList","todoList","item","changeTodoListTitle","map","tl","filter","index","findIndex","splice","unshift","AddItemForm","React","memo","addItem","disabled","useState","value","setValue","setError","addItemHandler","trimmedTitle","trim","style","display","alignItems","position","width","TextField","variant","onChange","e","currentTarget","onKeyPress","key","then","onBlur","helperText","label","IconButton","onClick","color","marginLeft","right","top","AddBox","isLoggedInSelector","auth","login","logout","useAppDispatch","useDispatch","useActions","actions","useMemo","bindActionCreators","Copyright","Typography","align","Link","href","target","rel","Date","getFullYear","useStyles","makeStyles","theme","paper","marginTop","spacing","flexDirection","avatar","margin","backgroundColor","palette","secondary","main","form","submit","Login","classes","useSelector","authSelectors","formik","useFormik","initialValues","email","password","rememberMe","validate","values","test","onSubmit","formikHelpers","thunk","authActions","rejected","setFieldError","field","to","Container","component","maxWidth","CssBaseline","className","Avatar","noValidate","handleSubmit","required","fullWidth","autoComplete","autoFocus","getFieldProps","touched","type","FormControlLabel","control","Checkbox","checked","Button","Grid","container","Box","mt","authAsyncActions","authReducer","TodoLists","demo","todoListSelectors","tasksSelectors","todoListsActions","useEffect","useCallback","helper","padding","Paper","elevation","flexWrap","overflowX","paddingBottom","allTaskTodoList","TodoList","EditableSpan","props","editMode","setEditMode","setTitle","offEditMode","changeItem","onDoubleClick","fetchTasks","tasksActions","allTaskForTodoList","taskForTodoList","t","New","Completed","changeTodoListTitleCallback","newTitle","removeTodoListCallback","all","active","completed","addTaskCallback","addTask","Task","task","Delete","listStyle","paddingLeft","justifyContent","size","todoListsAsyncActions","todoListsReducer","items","removeTask","updateTask","getState","currentTask","find","apiModel","deadline","description","priority","Low","startDate","forEach","removeTaskCallback","changeTaskStatus","changeTaskTitle","CompletedClassName","fontSize","tasksAsyncActions","tasksReducer","rootReducer","combineReducers","store","configureStore","middleware","getDefaultMiddleware","prepend","Alert","ErrorSnackbar","handleClose","event","reason","isOpen","Snackbar","open","autoHideDuration","onClose","severity","Error","errorCat","App","appSelectors","appStatus","AppBar","Toolbar","edge","aria-label","Menu","LinearProgress","fixed","exact","path","render","from","textAlign","CircularProgress","ReactDOM","basename","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","console","module","exports"],"mappings":"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","file":"static/js/main.8bab5f37.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import axios from \"axios\";\r\n\r\nexport type TodoListType = {\r\n    addedDate: string\r\n    id: string\r\n    order: number\r\n    title: string\r\n}\r\n\r\nexport enum ResultStatusCode {\r\n    success = 0,\r\n    error = 1\r\n}\r\n\r\nexport enum TaskStatuses {\r\n    New = 0,\r\n    InProgress = 1,\r\n    Completed = 2,\r\n    Draft = 3\r\n}\r\n\r\nexport enum TaskPriorities {\r\n    Low = 0,\r\n    Middle = 1,\r\n    High = 2,\r\n    Urgently = 3,\r\n    Later = 4\r\n}\r\n\r\nexport type TaskType = {\r\n    addedDate: string\r\n    deadline: string\r\n    description: string\r\n    id: string\r\n    order: number\r\n    priority: TaskPriorities\r\n    startDate: string\r\n    status: TaskStatuses\r\n    title: string\r\n    todoListId: string\r\n}\r\n\r\nexport type UpdateTaskModelType = {\r\n    title: string\r\n    description: string\r\n    status: TaskStatuses\r\n    priority: TaskPriorities\r\n    startDate: string\r\n    deadline: string\r\n}\r\n\r\nexport type FieldsErrorsType = { field: string, error: string };\r\nexport type ResponseType<D = {}> = {\r\n    fieldsErrors: Array<FieldsErrorsType>\r\n    messages: string[]\r\n    resultCode: number\r\n    data: D\r\n}\r\n\r\ntype ResponseTaskType = {\r\n    error: string | null\r\n    totalCount: number\r\n    items: Array<TaskType>\r\n}\r\n\r\nexport type LoginParamsType = {\r\n    email: string\r\n    password: string\r\n    rememberMe?: boolean\r\n    captcha?: string\r\n}\r\n\r\nconst instance = axios.create({\r\n        withCredentials: true,\r\n        baseURL: \"https://social-network.samuraijs.com/api/1.1/\",\r\n        headers: {\r\n            \"API-KEY\": \"daffbeb3-8fec-4c34-9d8d-6fcb41a16549\"\r\n        }\r\n    }\r\n)\r\n\r\nexport const todoListsApi = {\r\n    getTodoLists() {\r\n        return instance.get<Array<TodoListType>>('todo-lists')\r\n    },\r\n    createTodoList(title: string) {\r\n        return instance.post<ResponseType<{ item: TodoListType }>>('todo-lists', {title: title})\r\n    },\r\n    deleteTodoList(todoListId: string) {\r\n        return instance.delete<ResponseType>(`todo-lists/${todoListId}`)\r\n    },\r\n    updateTodoListTitle(todoListId: string, title: string) {\r\n        return instance.put<ResponseType>(`todo-lists/${todoListId}`, {title: title})\r\n    },\r\n    getTasks(todoListId: string) {\r\n        return instance.get<ResponseTaskType>(`todo-lists/${todoListId}/tasks`)\r\n    },\r\n    createTask(todoListId: string, title: string) {\r\n        return instance.post<ResponseType<{ item: TaskType }>>(`todo-lists/${todoListId}/tasks`, {title: title})\r\n    },\r\n    updateTask(todoListId: string, taskId: string, model: UpdateTaskModelType) {\r\n        return instance.put<ResponseType>(`todo-lists/${todoListId}/tasks/${taskId}`, model)\r\n    },\r\n    deleteTask(todoListId: string, taskId: string) {\r\n        return instance.delete<ResponseType>(`todo-lists/${todoListId}/tasks/${taskId}`)\r\n    }\r\n}\r\n\r\nexport const authAPI = {\r\n    me() {\r\n        return instance.get<ResponseType<{ data: LoginParamsType }>>(`auth/me`)\r\n    },\r\n    login(data: LoginParamsType) {\r\n        return instance.post<ResponseType<{ userId: number }>>(`auth/login`, data)\r\n    },\r\n    logout() {\r\n        return instance.delete<ResponseType>(`auth/login`)\r\n    }\r\n}\r\n","import {AppRootStateType} from \"../../bll/store\";\r\n\r\nexport const appStatusSelector = (state:AppRootStateType) => state.app.status\r\nexport const isInitializedSelector = (state: AppRootStateType) => state.app.isInitialized","import {createAction} from \"@reduxjs/toolkit\";\r\nimport {RequestStatusType} from \"../Application/application-reducer\";\r\nimport {FilterValuesType} from \"../Todolists/todolists-reducer\";\r\n\r\n\r\nconst setAppStatus = createAction<{status: RequestStatusType}>(\"appActions/setAppStatus\")\r\nconst setAppError = createAction<{error: string | null}>(\"appActions/setAppError\")\r\nconst setIsLoggedIn = createAction<{isLoggedIn: boolean}>(\"auth/setIsLoggedIn\")\r\nconst changeTasksEntityStatus = createAction<{ todoListId: string, taskId: string, entityStatus: RequestStatusType }>(\"tasks/changeTasksEntityStatus\")\r\nconst changeFilterTodoList = createAction<{ id: string, filter: FilterValuesType }>(\"todoLists/changeFilterTodoList\")\r\nconst changeTodoListEntityStatus = createAction<{ todoListId: string, entityStatus: RequestStatusType }>(\"todoLists/changeTodoListEntityStatus\")\r\n\r\nexport const appActions = {\r\n    setAppStatus,\r\n    setAppError,\r\n    setIsLoggedIn,\r\n    changeTasksEntityStatus,\r\n    changeFilterTodoList,\r\n    changeTodoListEntityStatus\r\n}","import {FieldsErrorsType, ResponseType} from \"../api/todolist-api\";\r\nimport {AxiosError} from \"axios\";\r\nimport {appActions} from \"../features/Actions/App\";\r\nimport {appActions as initializedApp} from \"../features/Application\"\r\n\r\n// original type:\r\n// BaseThunkAPI<S, E, D extends Dispatch = Dispatch, RejectedValue = undefined>\r\ntype ThunkAPIType = {\r\n    dispatch: (action: any) => any\r\n    rejectWithValue: Function\r\n}\r\nconst {setAppError, setAppStatus} = appActions\r\n\r\nexport const handleAsyncServerAppError = <D>(data: ResponseType<D>,\r\n                                             thunkAPI: ThunkAPIType,\r\n                                             showError = true) => {\r\n    if (showError) {\r\n        thunkAPI.dispatch(setAppError({error: data.messages.length ? data.messages[0] : 'Some error occurred'}))\r\n    }\r\n    thunkAPI.dispatch(setAppStatus({status: 'failed'}))\r\n    thunkAPI.dispatch(initializedApp.initializeApp.fulfilled({isInitialized: true}, \"\"))\r\n    return thunkAPI.rejectWithValue({errors: data.messages, fieldsErrors: data.fieldsErrors})\r\n}\r\n\r\nexport const handleAsyncServerNetworkError = (error: AxiosError,\r\n                                              thunkAPI: ThunkAPIType,\r\n                                              showError = true) => {\r\n    if (showError) {\r\n        thunkAPI.dispatch(setAppError({error: error.message ? error.message : 'Some error occurred'}))\r\n    }\r\n    thunkAPI.dispatch(setAppStatus({status: 'failed'}))\r\n    thunkAPI.dispatch(initializedApp.initializeApp.fulfilled({isInitialized: true}, \"\"))\r\n    return thunkAPI.rejectWithValue({errors: [error.message], fieldsErrors: undefined})\r\n}\r\n\r\nexport type ThunkError = { rejectValue: { errors: Array<string>, fieldsErrors?: Array<FieldsErrorsType> } }\r\n","import {createAsyncThunk, createSlice} from \"@reduxjs/toolkit\";\r\nimport {authAPI, ResultStatusCode} from \"../../api/todolist-api\";\r\nimport {handleAsyncServerAppError, handleAsyncServerNetworkError} from \"../../utils/utils-error\";\r\nimport {appActions} from \"../Actions/App\";\r\n\r\nexport type RequestStatusType = \"idle\" | \"loading\" | \"succeeded\" | \"failed\"\r\n\r\nexport type InitialStateType = typeof initialState\r\n\r\nconst initialState = {\r\n    status: \"loading\" as RequestStatusType,\r\n    error: null as string | null,\r\n    isInitialized: false\r\n}\r\n\r\nconst {setAppStatus, setIsLoggedIn} = appActions\r\n\r\nconst initializeApp = createAsyncThunk(\"application/initializeApp\", async (payload, thunkAPI) => {\r\n    thunkAPI.dispatch(setAppStatus({status: \"loading\"}))\r\n    try {\r\n        const response = await authAPI.me()\r\n        if (response.data.resultCode === ResultStatusCode.success) {\r\n            thunkAPI.dispatch(setIsLoggedIn({isLoggedIn: true}));\r\n            thunkAPI.dispatch(setAppStatus({status: \"succeeded\"}))\r\n        } else {\r\n            return handleAsyncServerAppError(response.data, thunkAPI)\r\n        }\r\n        return {isInitialized: true}\r\n    } catch (error) {\r\n        return handleAsyncServerNetworkError(error, thunkAPI)\r\n    }\r\n})\r\n\r\nexport const slice = createSlice({\r\n    name: \"app\",\r\n    initialState: initialState,\r\n    reducers: {},\r\n    extraReducers: (builder) => {\r\n        builder\r\n            .addCase(initializeApp.fulfilled, (state, action) => {\r\n                state.isInitialized = action.payload.isInitialized\r\n            })\r\n            .addCase(appActions.setAppStatus, (state, action) => {\r\n                state.status = action.payload.status\r\n            })\r\n            .addCase(appActions.setAppError, (state, action) => {\r\n                state.error = action.payload.error\r\n            })\r\n    }\r\n})\r\n\r\nexport const asyncActions = {initializeApp}\r\n\r\n\r\n","import * as appSelectors from \"./selectors\";\r\nimport {slice} from \"./application-reducer\"\r\nimport {asyncActions as appAsyncActions} from \"./application-reducer\"\r\n\r\n\r\nconst appActions = {\r\n    ...appAsyncActions,\r\n}\r\n\r\nconst appReducer = slice.reducer\r\n\r\nexport {\r\n    appSelectors,\r\n    appActions,\r\n    appReducer\r\n}\r\n","import {AppRootStateType} from \"../../bll/store\";\r\n\r\nexport const tasksSelector = (state:AppRootStateType) => state.tasks;","import {AppRootStateType} from \"../../bll/store\";\r\n\r\nexport const todoListsSelector = (state: AppRootStateType) => state.todoLists;","import {ResultStatusCode, todoListsApi, TodoListType} from \"../../api/todolist-api\";\r\nimport {handleAsyncServerAppError, handleAsyncServerNetworkError, ThunkError} from \"../../utils/utils-error\";\r\nimport {createAsyncThunk, createSlice} from \"@reduxjs/toolkit\";\r\nimport {RequestStatusType} from \"../Application/application-reducer\";\r\nimport {appActions} from \"../Actions/App\";\r\n\r\nexport type FilterValuesType = \"all\" | \"active\" | \"completed\"\r\nexport type TodoListDomainType = TodoListType & { filter: FilterValuesType, entityStatus: RequestStatusType }\r\nconst initialState: Array<TodoListDomainType> = []\r\n\r\nconst {setAppStatus, changeTodoListEntityStatus, changeFilterTodoList} = appActions\r\n\r\nconst fetchTodoLists = createAsyncThunk<{ todoLists: Array<TodoListType> }, undefined, ThunkError>\r\n(\"todoLists/fetchTodoLists\", async (payload, thunkAPI) => {\r\n    thunkAPI.dispatch(setAppStatus({status: \"loading\"}))\r\n    try {\r\n        const response = await todoListsApi.getTodoLists()\r\n        thunkAPI.dispatch(setAppStatus({status: \"succeeded\"}))\r\n        return {todoLists: response.data}\r\n    } catch (error) {\r\n        return handleAsyncServerNetworkError(error, thunkAPI)\r\n    }\r\n})\r\nconst removeTodoList = createAsyncThunk(\"todoLists/removeTodoList\", async (todoListId: string, thunkAPI) => {\r\n    thunkAPI.dispatch(setAppStatus({status: \"loading\"}))\r\n    thunkAPI.dispatch(changeTodoListEntityStatus({todoListId: todoListId, entityStatus: \"loading\"}))\r\n    try {\r\n        const response = await todoListsApi.deleteTodoList(todoListId)\r\n        if (response.data.resultCode === ResultStatusCode.success) {\r\n            thunkAPI.dispatch(setAppStatus({status: \"succeeded\"}))\r\n            return {id: todoListId}\r\n        } else {\r\n            return handleAsyncServerAppError(response.data, thunkAPI)\r\n        }\r\n    } catch (error) {\r\n        return handleAsyncServerNetworkError(error, thunkAPI)\r\n    }\r\n})\r\nconst addTodoList = createAsyncThunk<{ todoList: TodoListType }, string, ThunkError>(\"todoLists/addTodoList\", async (title, thunkAPI) => {\r\n    thunkAPI.dispatch(setAppStatus({status: \"loading\"}))\r\n    try {\r\n\r\n        const response = await todoListsApi.createTodoList(title)\r\n        if (response.data.resultCode === ResultStatusCode.success) {\r\n            thunkAPI.dispatch(setAppStatus({status: \"succeeded\"}))\r\n            return {todoList: response.data.data.item}\r\n        } else {\r\n            return handleAsyncServerAppError(response.data, thunkAPI, false)\r\n        }\r\n    } catch (error) {\r\n        return handleAsyncServerNetworkError(error, thunkAPI)\r\n    }\r\n})\r\nconst changeTodoListTitle = createAsyncThunk(\"todoLists/changeTodoListTitle\", async (payload: { todoListId: string, title: string }, thunkAPI) => {\r\n    thunkAPI.dispatch(setAppStatus({status: \"loading\"}))\r\n    try {\r\n        const response = await todoListsApi.updateTodoListTitle(payload.todoListId, payload.title)\r\n        if (response.data.resultCode === ResultStatusCode.success) {\r\n            thunkAPI.dispatch(setAppStatus({status: \"succeeded\"}))\r\n            return {title: payload.title, id: payload.todoListId}\r\n        } else {\r\n            return handleAsyncServerAppError(response.data, thunkAPI, false)\r\n        }\r\n    } catch (error) {\r\n        return handleAsyncServerNetworkError(error, thunkAPI)\r\n    }\r\n})\r\n\r\nexport const slice = createSlice({\r\n    name: \"todoLists\",\r\n    initialState: initialState,\r\n    reducers: {},\r\n    extraReducers: builder => {\r\n        builder\r\n            .addCase(fetchTodoLists.fulfilled, (state, action) => {\r\n                return action.payload.todoLists.map(tl => ({...tl, filter: \"all\", entityStatus: \"idle\"}))\r\n            })\r\n            .addCase(removeTodoList.fulfilled, (state, action) => {\r\n                const index = state.findIndex(tl => tl.id === action.payload.id)\r\n                if (index !== -1) state.splice(index, 1)\r\n            })\r\n            .addCase(addTodoList.fulfilled, (state, action) => {\r\n                state.unshift({...action.payload.todoList, filter: \"all\", entityStatus: \"idle\"})\r\n            })\r\n            .addCase(changeTodoListTitle.fulfilled, (state, action) => {\r\n                const index = state.findIndex(tl => tl.id === action.payload.id)\r\n                if (index !== -1) state[index].title = action.payload.title\r\n            })\r\n            .addCase(changeFilterTodoList, (state, action) => {\r\n                const index = state.findIndex(tl => tl.id === action.payload.id)\r\n                if (index !== -1) state[index].filter = action.payload.filter\r\n            })\r\n            .addCase(changeTodoListEntityStatus, (state, action) => {\r\n                const index = state.findIndex(tl => tl.id === action.payload.todoListId)\r\n                if (index !== -1) state[index].entityStatus = action.payload.entityStatus\r\n            })\r\n    }\r\n})\r\n\r\nexport const asyncActions = {fetchTodoLists, removeTodoList, addTodoList, changeTodoListTitle}\r\n","import React, {ChangeEvent, KeyboardEvent, useState} from 'react';\r\nimport {IconButton, TextField} from \"@material-ui/core\";\r\nimport {AddBox} from \"@material-ui/icons\";\r\n\r\nexport type AddItemFormSubmitHelperType = {\r\n    setError: (error: string) => void\r\n    setValue: (value: string) => void\r\n}\r\n\r\nexport type AddItemFormPropsType = {\r\n    addItem: (title: string, helper: AddItemFormSubmitHelperType) => void\r\n    title: string\r\n    disabled?: boolean\r\n}\r\n\r\nexport const AddItemForm: React.FC<AddItemFormPropsType> = React.memo(({addItem, title, disabled = false}) => {\r\n\r\n    const [value, setValue] = useState<string>(\"\")\r\n    const [error, setError] = useState<string | null>(null)\r\n\r\n    const onChangeTitleItemHandler = (e: ChangeEvent<HTMLInputElement>) => {\r\n        setValue(e.currentTarget.value)\r\n        setError(null)\r\n    }\r\n\r\n    const onKeyPressHandler = (e: KeyboardEvent<HTMLInputElement>) => {\r\n        if (error !== null) {\r\n            setError(null)\r\n        }\r\n        if (e.key === \"Enter\") {\r\n            addItemHandler()\r\n                .then()\r\n        }\r\n    }\r\n\r\n    const addItemHandler = async () => {\r\n        const trimmedTitle = value.trim()\r\n        if (trimmedTitle !== \"\") {\r\n            addItem(trimmedTitle, {setError, setValue})\r\n        } else {\r\n            setError(\"Title is required!\")\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div style={{display: \"flex\", alignItems: \"center\", position: \"relative\"}}>\r\n            <div style={{width: \"218px\"}}>\r\n                <TextField\r\n                    variant={\"outlined\"}\r\n                    value={value}\r\n                    onChange={onChangeTitleItemHandler}\r\n                    onKeyPress={onKeyPressHandler}\r\n                    onBlur={() => {\r\n                        setError(null)\r\n                    }}\r\n                    helperText={error}\r\n                    label={title}\r\n                    error={!!error}\r\n                    disabled={disabled}\r\n                />\r\n            </div>\r\n            <IconButton onClick={addItemHandler} color=\"primary\" disabled={disabled}\r\n                        style={{marginLeft: \"14px\", position: \"absolute\", right:\"0px\", top:\"0px\"}}>\r\n                <AddBox/>\r\n            </IconButton>\r\n        </div>\r\n    );\r\n})\r\n\r\n","import {AppRootStateType} from \"../../bll/store\";\r\n\r\nexport const isLoggedInSelector = (state: AppRootStateType) => state.auth.isLoggedIn;","import {authAPI, LoginParamsType, ResultStatusCode} from \"../../api/todolist-api\";\r\nimport {handleAsyncServerAppError, handleAsyncServerNetworkError, ThunkError} from \"../../utils/utils-error\";\r\nimport {createAsyncThunk, createSlice} from \"@reduxjs/toolkit\";\r\nimport {appActions} from \"../Actions/App\";\r\n\r\nexport type InitialStateType = typeof initialState\r\n\r\nconst initialState = {\r\n    isLoggedIn: false\r\n}\r\n\r\nconst {setAppStatus, setIsLoggedIn} = appActions\r\n\r\nconst login = createAsyncThunk<{ isLoggedIn: boolean }, LoginParamsType, ThunkError>(\"auth/login\", async (payload, thunkAPI) => {\r\n    thunkAPI.dispatch(setAppStatus({status: \"loading\"}))\r\n    try {\r\n        const response = await authAPI.login(payload)\r\n        if (response.data.resultCode === ResultStatusCode.success) {\r\n            thunkAPI.dispatch(setAppStatus({status: \"succeeded\"}))\r\n            return {isLoggedIn: true}\r\n        } else {\r\n            return handleAsyncServerAppError(response.data, thunkAPI)\r\n        }\r\n    } catch (error) {\r\n        return handleAsyncServerNetworkError(error, thunkAPI)\r\n    }\r\n})\r\n\r\nconst logout = createAsyncThunk(\"auth/logout\", async (payload, thunkAPI) => {\r\n    thunkAPI.dispatch(setAppStatus({status: \"loading\"}))\r\n    try {\r\n        const response = await authAPI.logout()\r\n        if (response.data.resultCode === ResultStatusCode.success) {\r\n            thunkAPI.dispatch(setAppStatus({status: \"succeeded\"}))\r\n            return {isLoggedIn: false}\r\n        } else {\r\n            return handleAsyncServerAppError(response.data, thunkAPI)\r\n        }\r\n    } catch (error) {\r\n        return handleAsyncServerNetworkError(error, thunkAPI)\r\n    }\r\n})\r\n\r\nexport const slice = createSlice({\r\n    name: \"auth\",\r\n    initialState: initialState,\r\n    reducers: {},\r\n    extraReducers: (builder) => {\r\n        builder\r\n            .addCase(login.fulfilled, (state, action) => {\r\n                state.isLoggedIn = action.payload.isLoggedIn\r\n            })\r\n            .addCase(logout.fulfilled, (state, action) => {\r\n                state.isLoggedIn = action.payload.isLoggedIn\r\n            })\r\n            .addCase(setIsLoggedIn, (state, action) => {\r\n                state.isLoggedIn = action.payload.isLoggedIn\r\n            })\r\n\r\n    }\r\n})\r\n\r\nexport const asyncActions = {login, logout}\r\n\r\n\r\n\r\n","import {useDispatch} from \"react-redux\";\r\nimport {ActionCreatorsMapObject, bindActionCreators} from \"redux\";\r\nimport {useMemo} from \"react\";\r\nimport {AppDispatchType} from \"../bll/store\";\r\n\r\nexport const useAppDispatch = () => useDispatch<AppDispatchType>()\r\n\r\nexport function useActions<T extends ActionCreatorsMapObject>(actions: T) {\r\n    const dispatch = useAppDispatch()\r\n\r\n    return useMemo(() => {\r\n        return bindActionCreators(actions, dispatch)\r\n    }, [])\r\n}","import React from 'react'\r\nimport {Avatar, Box, Button,\r\n    Checkbox,\r\n    Container,\r\n    CssBaseline,\r\n    FormControlLabel, Grid, Link,\r\n    makeStyles,\r\n    TextField,\r\n    Typography} from \"@material-ui/core\";\r\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\r\nimport {FormikHelpers, useFormik} from \"formik\";\r\nimport {useSelector} from \"react-redux\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {authActions, authSelectors} from \"./index\"\r\nimport {useAppDispatch} from \"../../utils/utils-redux\";\r\n\r\ntype FormValuesType = {\r\n    email: string\r\n    password: string\r\n    rememberMe: boolean\r\n}\r\n\r\ntype FormikErrorType = {\r\n    email?: string\r\n    password?: string\r\n    rememberMe?: boolean\r\n}\r\n\r\nfunction Copyright() {\r\n    return (\r\n        <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n            {'Copyright  '}\r\n            <Link color=\"inherit\" href=\"https://github.com/andrew9488/todoList\" target={'_blank'} rel=\"noopener noreferrer\">\r\n                Website\r\n            </Link>{' '}\r\n            {new Date().getFullYear()}\r\n            {'.'}\r\n        </Typography>\r\n    );\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    paper: {\r\n        marginTop: theme.spacing(3),\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n    },\r\n    avatar: {\r\n        margin: theme.spacing(1),\r\n        backgroundColor: theme.palette.secondary.main,\r\n    },\r\n    form: {\r\n        width: '100%',\r\n        marginTop: theme.spacing(1),\r\n    },\r\n    submit: {\r\n        margin: theme.spacing(3, 0, 2),\r\n    },\r\n}));\r\n\r\n\r\nexport const Login: React.FC = () => {\r\n\r\n    const classes = useStyles();\r\n    const isLoggedIn = useSelector(authSelectors.isLoggedInSelector)\r\n    const dispatch = useAppDispatch()\r\n\r\n    const formik = useFormik({\r\n        initialValues: {\r\n            email: '',\r\n            password: '',\r\n            rememberMe: false,\r\n        },\r\n        validate: (values) => {\r\n            const errors: FormikErrorType = {};\r\n            if (!values.email) {\r\n                errors.email = 'Required';\r\n            } else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(values.email)) {\r\n                errors.email = 'Invalid email address';\r\n            }\r\n\r\n            if (!values.password) {\r\n                errors.password = 'Required';\r\n            } else if (values.password.length < 3) {\r\n                errors.password = 'Must be 3 characters or more';\r\n            }\r\n            return errors;\r\n        },\r\n        onSubmit: async (values, formikHelpers: FormikHelpers<FormValuesType>) => {\r\n            const thunk = authActions.login(values)\r\n            const action = await dispatch(thunk)\r\n            if (authActions.login.rejected.match(action)) {\r\n                if (action.payload?.fieldsErrors?.length) {\r\n                    const error = action.payload?.fieldsErrors[0]\r\n                    formikHelpers.setFieldError(error.field, error.error)\r\n                }\r\n            }\r\n        },\r\n    });\r\n\r\n    if (isLoggedIn) {\r\n        return <Redirect to=\"/\"/>\r\n    }\r\n\r\n    return (\r\n        <Container component=\"main\" maxWidth=\"xs\">\r\n            <CssBaseline/>\r\n            <div className={classes.paper}>\r\n                <Avatar className={classes.avatar}>\r\n                    <LockOutlinedIcon/>\r\n                </Avatar>\r\n                <Typography component=\"h1\" variant=\"h5\">\r\n                    Sign in\r\n                </Typography>\r\n                <form className={classes.form} noValidate onSubmit={formik.handleSubmit}>\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        margin=\"normal\"\r\n                        required\r\n                        fullWidth\r\n                        id=\"email\"\r\n                        label=\"Email Address\"\r\n                        autoComplete=\"email\"\r\n                        autoFocus\r\n                        {...formik.getFieldProps('email')}\r\n                    />\r\n                    {formik.touched.email && formik.errors.email ?\r\n                        <div style={{color: 'red'}}>{formik.errors.email}</div> : ''}\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        margin=\"normal\"\r\n                        required\r\n                        fullWidth\r\n                        label=\"Password\"\r\n                        type=\"password\"\r\n                        id=\"password\"\r\n                        autoComplete=\"current-password\"\r\n                        {...formik.getFieldProps('password')}\r\n                    />\r\n                    {formik.touched.password && formik.errors.password ?\r\n                        <div style={{color: 'red'}}>{formik.errors.password}</div> : ''}\r\n                    <FormControlLabel\r\n                        control={<Checkbox checked={formik.values.rememberMe}\r\n                                           {...formik.getFieldProps('rememberMe')}\r\n                                           color=\"primary\"/>}\r\n                        label=\"Remember me\"\r\n                    />\r\n                    <Button\r\n                        type=\"submit\"\r\n                        fullWidth\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        className={classes.submit}\r\n                    >\r\n                        Login\r\n                    </Button>\r\n                    <Grid container>\r\n                        <Grid item>\r\n                            <Link href='https://social-network.samuraijs.com/' variant=\"body2\" target={'_blank'}>\r\n                                {'Don\\'t have an account? Sign Up'}\r\n                            </Link>\r\n                        </Grid>\r\n                        <Grid style={{marginTop: '20px', color: '#0000008A'}}>\r\n                            <p>You can use common test account credentials:</p>\r\n                            <p>Email: free@samuraijs.com</p>\r\n                            <p>Password: free</p>\r\n                        </Grid>\r\n                    </Grid>\r\n                </form>\r\n            </div>\r\n            <Box mt={8}>\r\n                <Copyright/>\r\n            </Box>\r\n        </Container>\r\n    )\r\n}\r\n","import * as authSelectors from \"./selectors\";\r\nimport {asyncActions as authAsyncActions} from \"./auth-reducer\";\r\nimport {slice} from \"./auth-reducer\";\r\nimport {Login} from \"./Login\"\r\n\r\nconst authActions = {\r\n    ...authAsyncActions,\r\n}\r\n\r\nconst authReducer = slice.reducer\r\nexport {\r\n    authSelectors,\r\n    authActions,\r\n    authReducer,\r\n    Login\r\n}","import {TodoListDomainType} from \"./todolists-reducer\";\r\nimport {useSelector} from \"react-redux\";\r\nimport {TasksStateType} from \"../Task/tasks-reducer\";\r\nimport React, {useCallback, useEffect} from \"react\";\r\nimport {Grid, Paper} from \"@material-ui/core\";\r\nimport {AddItemForm, AddItemFormSubmitHelperType} from \"../../components/AddItemForm/AddItemForm\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {authSelectors} from \"../Login/\";\r\nimport {TodoList, todoListsActions, todoListSelectors} from \"./index\";\r\nimport {tasksSelectors} from \"../Task\";\r\nimport {useActions, useAppDispatch} from \"../../utils/utils-redux\";\r\n\r\ntype TodoListsPropsType = {\r\n    demo?: boolean\r\n}\r\n\r\nexport const TodoLists: React.FC<TodoListsPropsType> = ({demo = false}) => {\r\n\r\n    let todoLists: Array<TodoListDomainType> = useSelector(todoListSelectors.todoListsSelector)\r\n    let tasks: TasksStateType = useSelector(tasksSelectors.tasksSelector)\r\n    const isLoggedIn = useSelector(authSelectors.isLoggedInSelector)\r\n    const dispatch = useAppDispatch()\r\n\r\n    const {fetchTodoLists} = useActions(todoListsActions)\r\n\r\n    useEffect(() => {\r\n        if (demo || !isLoggedIn) {\r\n            return;\r\n        }\r\n        if (!todoLists.length) {\r\n            fetchTodoLists()\r\n        }\r\n    }, [])\r\n\r\n    const addTodoList = useCallback(async (title: string, helper: AddItemFormSubmitHelperType) => {\r\n        const thunk = todoListsActions.addTodoList(title)\r\n        const action = await dispatch(thunk)\r\n        if (todoListsActions.addTodoList.rejected.match(action)) {\r\n            if (action.payload?.errors?.length) {\r\n                const error = action.payload?.errors[0]\r\n                helper.setError(error)\r\n            } else {\r\n                helper.setError(\"Some error\")\r\n            }\r\n        } else {\r\n            helper.setValue(\"\")\r\n        }\r\n    }, [])\r\n\r\n    if (!isLoggedIn) {\r\n        return <Redirect to=\"/login\"/>\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Grid container style={{padding: \"10px 0\"}}>\r\n                <Paper style={{padding: \"10px\", width: \"280px\"}}\r\n                       elevation={3}>\r\n                    <AddItemForm addItem={addTodoList} title={\"TodoList title\"}/>\r\n                </Paper>\r\n            </Grid>\r\n            <Grid container spacing={3} style={{flexWrap: \"nowrap\", overflowX: \"scroll\", paddingBottom: \"15px\"}}>\r\n                {\r\n                    todoLists.map(tl => {\r\n                        let allTaskTodoList = tasks[tl.id]\r\n                        return (\r\n                            <Grid item key={tl.id}>\r\n                                <div style={{width: \"300px\"}}>\r\n                                    <TodoList\r\n                                        todoList={tl}\r\n                                        tasks={allTaskTodoList}\r\n                                        demo={demo}\r\n                                    />\r\n                                </div>\r\n                            </Grid>\r\n                        );\r\n                    })\r\n                }\r\n            </Grid>\r\n        </>\r\n    );\r\n}","import React, {ChangeEvent, KeyboardEvent, useState} from \"react\";\r\nimport {TextField} from \"@material-ui/core\";\r\n\r\nexport type EditableSpanPropsType = {\r\n    title: string\r\n    changeItem: (newTitle: string) => void\r\n    disabled?: boolean\r\n}\r\n\r\nexport const EditableSpan: React.FC<EditableSpanPropsType> = React.memo((props) => {\r\n\r\n    const [editMode, setEditMode] = useState<boolean>(false)\r\n    const [title, setTitle] = useState<string>(props.title)\r\n\r\n    const onEditMode = () => {\r\n        setEditMode(true)\r\n    }\r\n    const offEditMode = () => {\r\n        setEditMode(false)\r\n        props.changeItem(title)\r\n    }\r\n\r\n    const onChangeTitleHandler = (e: ChangeEvent<HTMLInputElement>) => {\r\n        setTitle(e.currentTarget.value)\r\n    }\r\n\r\n    const onKeyPressHandler = (e: KeyboardEvent<HTMLInputElement>) => {\r\n        if (e.key === \"Enter\")\r\n            offEditMode()\r\n    }\r\n\r\n    return (\r\n        editMode\r\n            ? <TextField value={title}\r\n                         autoFocus\r\n                         onBlur={offEditMode}\r\n                         onChange={onChangeTitleHandler}\r\n                         onKeyPress={onKeyPressHandler}\r\n                         disabled={props.disabled}\r\n            />\r\n            : <span onDoubleClick={onEditMode}>{props.title}</span>\r\n    );\r\n})","import React, {useCallback, useEffect} from \"react\";\r\nimport {AddItemForm, AddItemFormSubmitHelperType} from \"../../../components/AddItemForm/AddItemForm\";\r\nimport {EditableSpan} from \"../../../components/EditableSpan/EditableSpan\";\r\nimport {Button, IconButton, Paper} from \"@material-ui/core\";\r\nimport {Delete} from \"@material-ui/icons\";\r\nimport {TaskStatuses} from \"../../../api/todolist-api\";\r\nimport {TodoListDomainType} from \"../todolists-reducer\";\r\nimport {TaskDomainType} from \"../../Task/tasks-reducer\";\r\nimport {todoListsActions} from \"../index\";\r\nimport {Task, tasksActions} from \"../../Task\";\r\nimport {useActions, useAppDispatch} from \"../../../utils/utils-redux\";\r\nimport {appActions} from \"../../Actions/App\";\r\n\r\ntype TodoListPropsType = {\r\n    todoList: TodoListDomainType\r\n    tasks: Array<TaskDomainType>\r\n    demo?: boolean\r\n}\r\n\r\nexport const TodoList: React.FC<TodoListPropsType> = React.memo(({demo = false, ...props}) => {\r\n\r\n    const {changeTodoListTitle, removeTodoList} = useActions(todoListsActions)\r\n    const {fetchTasks} = useActions(tasksActions)\r\n    const {changeFilterTodoList} = useActions(appActions)\r\n    const dispatch = useAppDispatch()\r\n\r\n    useEffect(() => {\r\n        if (demo) {\r\n            return;\r\n        }\r\n        if (!props.tasks.length) {\r\n            fetchTasks(props.todoList.id)\r\n        }\r\n    }, [])\r\n\r\n    let allTaskForTodoList = props.tasks\r\n    let taskForTodoList = allTaskForTodoList\r\n\r\n    if (props.todoList.filter === \"active\") {\r\n        taskForTodoList = allTaskForTodoList.filter(t => t.status === TaskStatuses.New)\r\n    }\r\n    if (props.todoList.filter === \"completed\") {\r\n        taskForTodoList = allTaskForTodoList.filter(t => t.status === TaskStatuses.Completed)\r\n    }\r\n\r\n    const changeTodoListTitleCallback = useCallback((newTitle: string) => {\r\n        changeTodoListTitle({title: newTitle, todoListId: props.todoList.id})\r\n    }, [props.todoList.id, changeTodoListTitle])\r\n    const removeTodoListCallback = useCallback(() => {\r\n        removeTodoList(props.todoList.id)\r\n    }, [props.todoList.id, removeTodoList])\r\n\r\n    const all = useCallback(() =>\r\n        changeFilterTodoList({id: props.todoList.id, filter: \"all\"}), [props.todoList.id])\r\n    const active = useCallback(() =>\r\n        changeFilterTodoList({id: props.todoList.id, filter: \"active\"}), [props.todoList.id])\r\n    const completed = useCallback(() =>\r\n        changeFilterTodoList({id: props.todoList.id, filter: \"completed\"}), [props.todoList.id])\r\n\r\n    const addTaskCallback = useCallback(async (title: string, helper: AddItemFormSubmitHelperType) => {\r\n        let thunk = tasksActions.addTask({title, todoListId: props.todoList.id})\r\n        const action = await dispatch(thunk)\r\n        if (tasksActions.addTask.rejected.match(action)) {\r\n            if (action.payload?.errors?.length) {\r\n                const error = action.payload?.errors[0]\r\n                helper.setError(error)\r\n            } else {\r\n                helper.setError(\"Some error\")\r\n            }\r\n        } else {\r\n            helper.setValue(\"\")\r\n        }\r\n    }, [props.todoList.id])\r\n\r\n    const tasks = taskForTodoList.map(t => {\r\n        return (\r\n            <Task key={t.id} task={t} todoListId={props.todoList.id} disabled={t.entityStatus === \"loading\"}/>\r\n        );\r\n    })\r\n\r\n    return (\r\n        <Paper style={{padding: \"10px\", position: \"relative\"}}\r\n               elevation={3}>\r\n            <IconButton style={{position: \"absolute\", right: \"9px\", top: \"3px\"}} onClick={removeTodoListCallback}\r\n                        disabled={props.todoList.entityStatus === \"loading\"}>\r\n                <Delete/>\r\n            </IconButton>\r\n            <h3>\r\n                <EditableSpan title={props.todoList.title} changeItem={changeTodoListTitleCallback}\r\n                              disabled={props.todoList.entityStatus === \"loading\"}/>\r\n            </h3>\r\n            <AddItemForm addItem={addTaskCallback} title={\"Task title\"}\r\n                         disabled={props.todoList.entityStatus === \"loading\"}/>\r\n            <ul style={{listStyle: \"none\", paddingLeft: \"0\"}}>\r\n                {!tasks.length && <span style={{color: \"gray\", marginLeft: \"15px\"}}>No tasks</span>}\r\n                {tasks}\r\n            </ul>\r\n            <div style={{display: \"flex\", justifyContent: \"space-evenly\"}}>\r\n                <Button\r\n                    color={props.todoList.filter === \"all\" ? \"secondary\" : \"primary\"}\r\n                    variant={\"contained\"}\r\n                    size={\"small\"}\r\n                    onClick={all}>All\r\n                </Button>\r\n                <Button\r\n                    color={props.todoList.filter === \"active\" ? \"secondary\" : \"primary\"}\r\n                    variant={\"contained\"}\r\n                    size={\"small\"}\r\n                    onClick={active}>Active\r\n                </Button>\r\n                <Button\r\n                    color={props.todoList.filter === \"completed\" ? \"secondary\" : \"primary\"}\r\n                    variant={\"contained\"}\r\n                    size={\"small\"}\r\n                    onClick={completed}>Completed\r\n                </Button>\r\n            </div>\r\n        </Paper>\r\n    );\r\n})\r\n\r\n\r\n","import * as todoListSelectors from \"./selectors\";\r\nimport {asyncActions as todoListsAsyncActions} from \"./todolists-reducer\";\r\nimport {slice} from \"./todolists-reducer\";\r\nimport {TodoLists} from \"./TodoLists\";\r\nimport {TodoList} from \"./Todolist/TodoList\"\r\n\r\nconst todoListsActions = {\r\n    ...todoListsAsyncActions,\r\n}\r\n\r\n\r\nconst todoListsReducer = slice.reducer\r\n\r\nexport {\r\n    todoListSelectors,\r\n    todoListsActions,\r\n    todoListsReducer,\r\n    TodoLists,\r\n    TodoList\r\n}","import {ResultStatusCode, TaskPriorities, TaskStatuses, TaskType, todoListsApi} from \"../../api/todolist-api\";\r\nimport {handleAsyncServerAppError, handleAsyncServerNetworkError, ThunkError} from \"../../utils/utils-error\";\r\nimport {createAsyncThunk, createSlice} from \"@reduxjs/toolkit\";\r\nimport {AppRootStateType} from \"../../bll/store\";\r\nimport {RequestStatusType} from \"../Application/application-reducer\";\r\nimport {todoListsActions} from \"../Todolists\";\r\nimport {appActions} from \"../Actions/App\";\r\n\r\ntype UpdateTaskDomainModelType = {\r\n    title?: string\r\n    description?: string\r\n    status?: TaskStatuses\r\n    priority?: TaskPriorities\r\n    startDate?: string\r\n    deadline?: string\r\n}\r\n\r\nconst {setAppStatus, changeTasksEntityStatus} = appActions\r\n\r\nexport type TaskDomainType = TaskType & { entityStatus: RequestStatusType }\r\nexport type TasksStateType = { [key: string]: Array<TaskDomainType> }\r\nconst initialState: TasksStateType = {}\r\n\r\nconst fetchTasks = createAsyncThunk<{ todoListId: string, tasks: Array<TaskType> }, string, ThunkError>\r\n(\"tasks/fetchTasks\", async (todoListId: string, thunkAPI) => {\r\n    thunkAPI.dispatch(setAppStatus({status: \"loading\"}))\r\n    try {\r\n        const response = await todoListsApi.getTasks(todoListId)\r\n        thunkAPI.dispatch(setAppStatus({status: \"succeeded\"}))\r\n        return {todoListId, tasks: response.data.items}\r\n    } catch (error) {\r\n        return handleAsyncServerNetworkError(error, thunkAPI)\r\n    }\r\n})\r\nconst removeTask = createAsyncThunk(\"tasks/removeTask\", async (payload: { todoListId: string, taskId: string }, thunkAPI) => {\r\n    thunkAPI.dispatch(setAppStatus({status: \"loading\"}))\r\n    thunkAPI.dispatch(changeTasksEntityStatus({\r\n        todoListId: payload.todoListId,\r\n        taskId: payload.taskId,\r\n        entityStatus: \"loading\"\r\n    }))\r\n    try {\r\n        const response = await todoListsApi.deleteTask(payload.todoListId, payload.taskId)\r\n        if (response.data.resultCode === ResultStatusCode.success) {\r\n            thunkAPI.dispatch(setAppStatus({status: \"succeeded\"}))\r\n            return {taskId: payload.taskId, todoListId: payload.todoListId}\r\n        } else {\r\n            return handleAsyncServerAppError(response.data, thunkAPI)\r\n        }\r\n    } catch (error) {\r\n        return handleAsyncServerNetworkError(error, thunkAPI)\r\n    }\r\n})\r\nconst addTask = createAsyncThunk<{ task: TaskType }, { title: string, todoListId: string }, ThunkError>(\"tasks/addTask\",\r\n    async (payload, thunkAPI) => {\r\n        thunkAPI.dispatch(setAppStatus({status: \"loading\"}))\r\n        try {\r\n            const response = await todoListsApi.createTask(payload.todoListId, payload.title)\r\n            if (response.data.resultCode === ResultStatusCode.success) {\r\n                thunkAPI.dispatch(setAppStatus({status: \"succeeded\"}))\r\n                return {task: response.data.data.item}\r\n            } else {\r\n                return handleAsyncServerAppError(response.data, thunkAPI, false)\r\n            }\r\n        } catch (error) {\r\n            return handleAsyncServerNetworkError(error, thunkAPI)\r\n        }\r\n    })\r\nconst updateTask = createAsyncThunk(\"tasks/updateTask\", async (payload: { taskId: string, model: UpdateTaskDomainModelType, todoListId: string },\r\n                                                               thunkAPI) => {\r\n    thunkAPI.dispatch(setAppStatus({status: \"loading\"}))\r\n    const state = thunkAPI.getState() as AppRootStateType\r\n    const currentTask = state.tasks[payload.todoListId].find(t => t.id === payload.taskId)\r\n    if (!currentTask) {\r\n        return thunkAPI.rejectWithValue(\"error\")\r\n    }\r\n\r\n    const apiModel = {\r\n        title: currentTask.title,\r\n        status: currentTask.status,\r\n        deadline: currentTask.deadline,\r\n        description: currentTask.description,\r\n        priority: TaskPriorities.Low,\r\n        startDate: currentTask.startDate,\r\n        ...payload.model\r\n    }\r\n    try {\r\n        const response = await todoListsApi.updateTask(payload.todoListId, payload.taskId, apiModel)\r\n        if (response.data.resultCode === ResultStatusCode.success) {\r\n            thunkAPI.dispatch(setAppStatus({status: \"succeeded\"}))\r\n            return {taskId: payload.taskId, model: payload.model, todoListId: payload.todoListId}\r\n        } else {\r\n            return handleAsyncServerAppError(response.data, thunkAPI)\r\n        }\r\n    } catch (error) {\r\n        return handleAsyncServerNetworkError(error, thunkAPI)\r\n    }\r\n})\r\n\r\nexport const slice = createSlice({\r\n    name: \"tasks\",\r\n    initialState: initialState,\r\n    reducers: {},\r\n    extraReducers: (builder) => {\r\n        builder\r\n            .addCase(todoListsActions.addTodoList.fulfilled, (state, action) => {\r\n                state[action.payload.todoList.id] = []\r\n            })\r\n            .addCase(todoListsActions.removeTodoList.fulfilled, (state, action) => {\r\n                delete state[action.payload.id]\r\n            })\r\n            .addCase(todoListsActions.fetchTodoLists.fulfilled, (state, action) => {\r\n                action.payload.todoLists.forEach(tl => {\r\n                        if (!state[tl.id]) state[tl.id] = []\r\n                    }\r\n                )\r\n            })\r\n            .addCase(fetchTasks.fulfilled, (state, action) => {\r\n                return {\r\n                    ...state, [action.payload.todoListId]: action.payload.tasks.map(t => ({...t, entityStatus: \"idle\"}))\r\n                }\r\n            })\r\n            .addCase(removeTask.fulfilled, (state, action) => {\r\n                const tasks = state[action.payload.todoListId]\r\n                const index = tasks.findIndex(t => t.id === action.payload.taskId)\r\n                if (index !== -1) tasks.splice(index, 1)\r\n            })\r\n            .addCase(addTask.fulfilled, (state, action) => {\r\n                const tasks = state[action.payload.task.todoListId]\r\n                tasks.unshift({...action.payload.task, entityStatus: \"idle\"})\r\n            })\r\n            .addCase(updateTask.fulfilled, (state, action) => {\r\n                const tasks = state[action.payload.todoListId]\r\n                const index = tasks.findIndex(t => t.id === action.payload.taskId)\r\n                if (index !== -1) {\r\n                    tasks[index] = {...tasks[index], ...action.payload.model}\r\n                }\r\n            })\r\n            .addCase(changeTasksEntityStatus, (state, action) => {\r\n                const tasks = state[action.payload.todoListId]\r\n                const index = tasks.findIndex(t => t.id === action.payload.taskId)\r\n                if (index !== -1) tasks[index].entityStatus = action.payload.entityStatus\r\n            })\r\n    }\r\n})\r\n\r\nexport const asyncActions = {fetchTasks, removeTask, addTask, updateTask}","import React, {ChangeEvent, useCallback} from \"react\";\r\nimport {Checkbox, IconButton} from \"@material-ui/core\";\r\nimport {EditableSpan} from \"../../components/EditableSpan/EditableSpan\";\r\nimport {Delete} from \"@material-ui/icons\";\r\nimport {TaskStatuses, TaskType} from \"../../api/todolist-api\";\r\nimport {tasksActions} from \"./index\";\r\nimport {useActions} from \"../../utils/utils-redux\";\r\n\r\n\r\nexport type TaskPropsType = {\r\n    task: TaskType\r\n    todoListId: string\r\n    disabled: boolean\r\n}\r\n\r\nexport const Task: React.FC<TaskPropsType> = React.memo((props) => {\r\n\r\n    const {updateTask, removeTask} = useActions(tasksActions)\r\n\r\n    const removeTaskCallback = useCallback(() => removeTask({\r\n        taskId: props.task.id,\r\n        todoListId: props.todoListId\r\n    }), [props.task.id, props.todoListId, removeTask])\r\n\r\n    const changeTaskStatus = useCallback((e: ChangeEvent<HTMLInputElement>) => updateTask({\r\n        taskId: props.task.id,\r\n        model: {status: e.currentTarget.checked ? TaskStatuses.Completed : TaskStatuses.New},\r\n        todoListId: props.todoListId\r\n    }), [props.task.id, props.todoListId, updateTask])\r\n\r\n    const changeTaskTitle = useCallback((newTitle: string) => {\r\n        updateTask({taskId: props.task.id, model: {title: newTitle}, todoListId: props.todoListId})\r\n    }, [props.task.id, props.todoListId, updateTask])\r\n\r\n    const CompletedClassName = props.task.status === TaskStatuses.Completed ? \"is-done\" : \"\"\r\n\r\n    return (\r\n        <div style={{position: \"relative\"}}>\r\n            <li className={CompletedClassName}>\r\n                <Checkbox\r\n                    color={\"secondary\"}\r\n                    checked={props.task.status === TaskStatuses.Completed}\r\n                    onChange={changeTaskStatus}/>\r\n                <EditableSpan title={props.task.title} changeItem={changeTaskTitle} disabled={props.disabled}/>\r\n                <IconButton onClick={removeTaskCallback} disabled={props.disabled}\r\n                            style={{position: \"absolute\", right: \"2px\", top: \"0\"}}>\r\n                    <Delete fontSize={\"small\"}/>\r\n                </IconButton>\r\n            </li>\r\n        </div>\r\n    );\r\n})","import * as tasksSelectors from \"./selectors\";\r\nimport {slice, asyncActions as tasksAsyncActions} from \"./tasks-reducer\";\r\nimport {Task} from \"./Task\";\r\n\r\nconst tasksActions = {\r\n    ...tasksAsyncActions,\r\n}\r\n\r\nconst tasksReducer = slice.reducer\r\n\r\nexport {\r\n    tasksSelectors,\r\n    tasksActions,\r\n    Task,\r\n    tasksReducer\r\n}","import {combineReducers} from \"redux\";\r\nimport {appReducer} from \"../features/Application\";\r\nimport {tasksReducer} from \"../features/Task\";\r\nimport {todoListsReducer} from \"../features/Todolists\";\r\nimport {authReducer} from \"../features/Login\";\r\n\r\nexport const rootReducer = combineReducers({\r\n    app: appReducer,\r\n    tasks: tasksReducer,\r\n    todoLists: todoListsReducer,\r\n    auth: authReducer\r\n})","import thunk from \"redux-thunk\";\r\nimport {configureStore} from \"@reduxjs/toolkit\";\r\nimport {rootReducer} from \"./rootReducer\";\r\n\r\nexport const store = configureStore({\r\n    reducer: rootReducer,\r\n    middleware: getDefaultMiddleware => getDefaultMiddleware().prepend(thunk)\r\n})\r\n\r\n\r\nexport type AppRootStateType = ReturnType<typeof rootReducer>\r\n\r\nexport type AppDispatchType = typeof store.dispatch\r\n\r\nif (process.env.NODE_ENV !== \"production\" && module.hot) {\r\n    module.hot.accept(\"./rootReducer\", () => store.replaceReducer(rootReducer))\r\n}\r\n\r\n","import React from 'react';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport MuiAlert, {AlertProps} from '@material-ui/lab/Alert';\r\nimport {useSelector} from \"react-redux\";\r\nimport {AppRootStateType} from \"../../bll/store\";\r\nimport { useActions } from '../../utils/utils-redux';\r\nimport { appActions } from '../../features/Actions/App';\r\n\r\nfunction Alert(props: AlertProps) {\r\n    return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\r\n}\r\n\r\nexport const ErrorSnackbar = () => {\r\n\r\n    const error = useSelector<AppRootStateType, null | string>(state => state.app.error)\r\n    const {setAppError} = useActions(appActions)\r\n\r\n    const handleClose = (event?: React.SyntheticEvent, reason?: string) => {\r\n        if (reason === 'clickaway') {\r\n            return;\r\n        }\r\n        setAppError({error: null})\r\n    };\r\n\r\n    const isOpen = error !== null\r\n\r\n    return (\r\n        <Snackbar open={isOpen} autoHideDuration={6000} onClose={handleClose}>\r\n            <Alert onClose={handleClose} severity=\"error\">\r\n                {error}\r\n            </Alert>\r\n        </Snackbar>\r\n    );\r\n}","import React from \"react\";\r\nimport style from \"./ErrorPage.module.css\"\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\nexport const Error: React.FC = () => {\r\n    return (\r\n        <div className={style.error}>\r\n            <div>ERROR 404</div>\r\n            <div>The cat couldn't find a page!</div>\r\n            <div className={style.errorCat}>/. .\\</div>\r\n            <div className={style.item}>\r\n                <NavLink to={\"/\"}>GO HOME</NavLink>\r\n            </div>\r\n        </div>\r\n    );\r\n}","import React, {useEffect} from 'react';\r\nimport './App.css';\r\nimport {AppBar, Button, CircularProgress, Container, IconButton, LinearProgress, Toolbar} from \"@material-ui/core\";\r\nimport {Menu} from \"@material-ui/icons\";\r\nimport {TodoLists} from \"../features/Todolists\";\r\nimport {useSelector} from \"react-redux\";\r\nimport {ErrorSnackbar} from \"../components/ErrorSnackbar/ErrorSnackbar\";\r\nimport {Login} from \"../features/Login\";\r\nimport {Redirect, Route, Switch} from 'react-router-dom';\r\nimport {authActions, authSelectors} from \"../features/Login\";\r\nimport {appActions, appSelectors} from \"../features/Application\";\r\nimport {useActions} from \"../utils/utils-redux\";\r\nimport {Error} from \"../components/ErrorPage/ErrorPage\";\r\n\r\n\r\ntype AppPropsType = {}\r\n\r\nexport const App: React.FC<AppPropsType> = () => {\r\n\r\n    const isInitialized = useSelector(appSelectors.isInitializedSelector)\r\n    const appStatus = useSelector(appSelectors.appStatusSelector)\r\n    const isLoggedIn = useSelector(authSelectors.isLoggedInSelector)\r\n    const {initializeApp} = useActions(appActions)\r\n    const {logout} = useActions(authActions)\r\n\r\n    useEffect(() => {\r\n        if (!isInitialized) {\r\n            initializeApp()\r\n        }\r\n    }, [])\r\n\r\n    const logoutCallback = () => {\r\n        logout()\r\n    }\r\n\r\n    if (!isInitialized) {\r\n        return <div\r\n            style={{position: 'fixed', top: '30%', textAlign: 'center', width: '100%'}}>\r\n            <CircularProgress color=\"secondary\" size={150}/>\r\n        </div>\r\n    }\r\n\r\n    return (\r\n        <div className=\"App\">\r\n            <AppBar position=\"static\">\r\n                <ErrorSnackbar/>\r\n                <Toolbar style={{display: \"flex\", justifyContent: \"space-between\"}}>\r\n                    {isLoggedIn && <IconButton edge=\"start\" color=\"inherit\" aria-label=\"menu\">\r\n                        <Menu/>\r\n                    </IconButton>}\r\n                    {isLoggedIn && <Button color=\"inherit\" onClick={logoutCallback}>Logout</Button>}\r\n                </Toolbar>\r\n                {appStatus === \"loading\" && <LinearProgress color=\"secondary\"/>}\r\n            </AppBar>\r\n            <Container fixed>\r\n                <Switch>\r\n                    <Route exact path=\"/\" render={() => <TodoLists demo={false}/>}/>\r\n                    <Route path=\"/login\" render={() => <Login/>}/>\r\n                    <Route path=\"/404\" render={() => <Error/>}/>\r\n                    <Redirect from=\"*\" to=\"/404\"/>\r\n                </Switch>\r\n            </Container>\r\n        </div>\r\n    );\r\n}\r\n\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nimport {Provider} from \"react-redux\";\r\nimport {store} from \"./bll/store\";\r\nimport {App} from \"./app/App\";\r\nimport {BrowserRouter} from \"react-router-dom\";\r\n\r\n\r\nconst rerenderEntireTree = () => {\r\n    ReactDOM.render(\r\n        <BrowserRouter basename=\"/todolist\">\r\n            <Provider store={store}>\r\n                <App/>\r\n            </Provider>\r\n        </BrowserRouter>\r\n        , document.getElementById(\"root\"));\r\n}\r\nrerenderEntireTree()\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n\r\n\r\nif (process.env.NODE_ENV !== \"production\" && module.hot) {\r\n    module.hot.accept(\"./app/App\", () => rerenderEntireTree())\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"error\":\"ErrorPage_error__31yOz\",\"errorCat\":\"ErrorPage_errorCat__WYVDn\",\"item\":\"ErrorPage_item__2jI41\"};"],"sourceRoot":""}